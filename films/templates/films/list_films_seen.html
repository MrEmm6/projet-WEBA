{% extends 'films/base.html' %}
{% block content %}
    <h1>Liste des films vues</h1>
    <a href="{% url 'ajout_film' %}"><button class="btn-modifier">Ajouter</button></a>

    <table>
        <tr>
            <th>Titre</th>
            <th>Auteur</th>
            <th>Date du visionnage</th>
            <th>Avis perso</th>
            <th>Modifier</th>
        </tr>
            {% for film in list_films %}
                <tr>
                    <td>{{ film.titre }}</td>
                    <td>{{ film.auteur }}</td>
                    <td>{{ film.get_date_vue }}</td>
                    <td>{{ film.avis }}</td>
                    <td><a href="{% url 'modif_film' pk=film.pk %}"><button class="btn-modifier">Modifier</button></a></td>
                </tr>
            {% endfor %}
    </table>

    <section id="search-section" data-search-url="{% url 'search_films_api' %}" style="margin-top:1.5rem;">
        <h2>Recherche de films</h2>
        <input type="text" id="search-input" placeholder="Titre ou auteur..." />
        <button id="btn-search" class="btn-modifier">Rechercher</button>
        <p id="search-log" style="font-size:0.9rem;color:#444;"></p>
        <table id="search-results" border="1" style="margin-top:1rem; width:100%; border-collapse:collapse;">
            <thead>
                <tr><th>Titre</th><th>Auteur</th><th>Date</th><th>Avis</th></tr>
            </thead>
            <tbody>
               <!-- Les résultats de la recherche seront insérés ici par JavaScript -->
            </tbody>
        </table>
    </section>
{% endblock %}